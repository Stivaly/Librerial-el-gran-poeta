{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ef68022e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"fondo\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"contenido\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Login\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Iniciar sesión\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.enviarFormulario && $options.enviarFormulario(...args), [\"prevent\"])),\n    id: \"login-form\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    ref: \"usernameInput\",\n    id: \"usernameInput\",\n    type: \"\",\n    placeholder: \"Correo Electrónico\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.username]]), _withDirectives(_createElementVNode(\"input\", {\n    ref: \"passwordInput\",\n    id: \"passwordInput\",\n    type: \"password\",\n    class: _normalizeClass({\n      'error': $options.validarPassword\n    }),\n    placeholder: \"Contraseña\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.password = $event)\n  }, null, 2 /* CLASS */), [[_vModelText, $data.form.password]]), $options.validarPassword ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, \"Si no recuerdas tu contraseña debes contactar al administrador\")) : _createCommentVNode(\"v-if\", true), _hoisted_6], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","$options","enviarFormulario","id","ref","placeholder","$event","$data","form","username","_normalizeClass","validarPassword","password","_hoisted_5","_createCommentVNode","_hoisted_6"],"sources":["C:\\Users\\Stiva\\Documents\\GitHub\\Librerial-el-gran-poeta\\backend\\frontend\\vue\\libreria\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"fondo\">\r\n    <div class=\"container\">\r\n      <div class=\"contenido\">\r\n        <h2>Login</h2>\r\n        <form @submit.prevent=\"enviarFormulario\" id=\"login-form\">\r\n          <input ref=\"usernameInput\" id=\"usernameInput\" type=\"\" placeholder=\"Correo Electrónico\" v-model=\"form.username\">\r\n          <input ref=\"passwordInput\" id=\"passwordInput\" type=\"password\" :class=\"{'error': validarPassword}\" placeholder=\"Contraseña\" v-model=\"form.password\">\r\n          <p v-if=\"validarPassword\">Si no recuerdas tu contraseña debes contactar al administrador</p>\r\n          <button type=\"submit\">Iniciar sesión</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"UserLogin\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        username: \"\",\r\n        password: \"\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    enviarFormulario() {\r\n      const loginUrl = '/api/login/';\r\n      \r\n      // Asume que Axios ya está configurado para enviar el token CSRF\r\n      axios.post(loginUrl, this.form)\r\n        .then(response => {\r\n          console.log(\"Login exitoso\", response);\r\n          localStorage.setItem('token', response.data.token);\r\n          // Manejo de la respuesta exitosa\r\n          // Redireccionar, mostrar mensaje, etc.\r\n          // Redireccionar a la página de inicio\r\n          this.$router.push('/home'); // Redirige a la ruta principal, ajusta según tu configuración de rutas\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Error en el login\", error);\r\n          // Manejo del error\r\n          // Mostrar mensaje de error al usuario\r\n        });\r\n    }\r\n  },\r\n  computed: {\r\n    validarPassword() {\r\n      const exp = /^(?=.*\\d)(?=.*[a-záéíóúñ]).*[A-ZÁÉÍÓÚÜÑ]/;\r\n      const isValid = exp.test(this.form.password);\r\n      return !isValid;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  @import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Truculenta:opsz,wght@12..72,100..900&display=swap');\r\n\r\n  html,body{\r\n      padding:0px;\r\n      margin: 0px;\r\n      width: 100%;\r\n      height: 100vh;\r\n      font-family: \"open-sans\";\r\n      color: black;\r\n  }\r\n\r\n  .fondo{\r\n      background-image: url(../assets/image/fondo.jpg);\r\n      background-size: cover;\r\n      background-position: center center;\r\n      width: 100%;\r\n      height: 100vh;\r\n      display:flex;\r\n      align-content: center;\r\n      align-items: center;\r\n      \r\n      \r\n  }\r\n\r\n  .fondo .container{\r\n      width: 100%;\r\n      text-align: center;\r\n  }\r\n\r\n  .fondo .container .contenido{\r\n      width: 100%;\r\n      max-width: 400px;\r\n      max-height: 350px;\r\n      background: rgba(255, 255, 255, 0.89);\r\n      padding: 20px;\r\n      border-radius: 10px;\r\n      display: inline-block;\r\n  }\r\n\r\n  .fondo .container .contenido h3{\r\n      margin-top: 0px;\r\n  }\r\n\r\n  .fondo .container .contenido input{\r\n      height: 55px;\r\n      margin: 0px;\r\n      border:0px;\r\n      outline: none;\r\n      padding: 10px;\r\n      border-radius: 5px;\r\n      width: 100%;\r\n      margin-bottom: 10px;\r\n      font-size: 18px;\r\n  }\r\n\r\n  .fondo .container .contenido input.error{\r\n      border-bottom: 3px solid rgb(175, 82, 82);\r\n  } \r\n\r\n  .fondo .container .contenido button{\r\n      \r\n      margin: 0px;\r\n      border: 0px;\r\n      display: block;\r\n      margin: auto;\r\n      padding: 10px 30px;\r\n      background: black;\r\n      color: white;\r\n      border-radius: 5px;\r\n  }\r\n\r\n  p{\r\n      font-size: 14px;\r\n      font-style: italic;\r\n      color: rgb(31, 70, 243);\r\n      text-align: justify-center;\r\n\r\n  }\r\n\r\n  .error {\r\n  border: 1px solid red;\r\n  }\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAO;;EACXA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAW;gEACpBC,mBAAA,CAAc,YAAV,OAAK;;EAJjBC,GAAA;AAAA;gEASUD,mBAAA,CAA6C;EAArCE,IAAI,EAAC;AAAQ,GAAC,gBAAc;;uBAR5CC,mBAAA,CAYM,OAZNC,UAYM,GAXJJ,mBAAA,CAUM,OAVNK,UAUM,GATJL,mBAAA,CAQM,OARNM,UAQM,GAPJC,UAAc,EACdP,mBAAA,CAKO;IALAQ,QAAM,EAAAC,MAAA,QAAAA,MAAA,MALrBC,cAAA,KAAAC,IAAA,KAK+BC,QAAA,CAAAC,gBAAA,IAAAD,QAAA,CAAAC,gBAAA,IAAAF,IAAA,CAAgB;IAAEG,EAAE,EAAC;sBAC1Cd,mBAAA,CAA+G;IAAxGe,GAAG,EAAC,eAAe;IAACD,EAAE,EAAC,eAAe;IAACZ,IAAI,EAAC,EAAE;IAACc,WAAW,EAAC,oBAAoB;IANhG,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAM0GC,KAAA,CAAAC,IAAI,CAACC,QAAQ,GAAAH,MAAA;iDAAbC,KAAA,CAAAC,IAAI,CAACC,QAAQ,E,mBAC7GpB,mBAAA,CAAmJ;IAA5Ie,GAAG,EAAC,eAAe;IAACD,EAAE,EAAC,eAAe;IAACZ,IAAI,EAAC,UAAU;IAAEH,KAAK,EAP9EsB,eAAA;MAAA,SAO0FT,QAAA,CAAAU;IAAe;IAAGN,WAAW,EAAC,YAAY;IAPpI,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAO8IC,KAAA,CAAAC,IAAI,CAACI,QAAQ,GAAAN,MAAA;0CAAbC,KAAA,CAAAC,IAAI,CAACI,QAAQ,E,GACxIX,QAAA,CAAAU,eAAe,I,cAAxBnB,mBAAA,CAA4F,KARtGqB,UAAA,EAQoC,gEAA8D,KARlGC,mBAAA,gBASUC,UAA6C,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}